<div>
  <!-- <div class='title'>
    <a routerLink="/monitor/indexes">_返回</a>
    <span>新建指标</span>
  </div> -->
  <div class='content'>
    <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
      <div nz-row [nzGutter]="0" class="row">
        <div nz-col [nzSpan]="24">
          <div nz-form-item nz-row class="row">
            <div nz-form-label nz-col [nzSpan]="4">
              <label [attr.for]="'name'" nz-form-item-required>名称</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="20">
              <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'name'" [nzId]="'name'"></nz-input>
              <div nz-form-explain *ngIf="getFormControl('name').dirty && getFormControl('name').hasError('required')">请输入名称</div>
            </div>
          </div>
        </div>
      </div>
      <div nz-row [nzGutter]="0" class="row">
        <div nz-col [nzSpan]="24">
          <div nz-form-item nz-row class="row">
            <div nz-form-label nz-col [nzSpan]="4">
              <label [attr.for]="'description'" nz-form-item-required>描述</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="20">
              <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'description'" [nzId]="'description'"></nz-input>
              <div nz-form-explain *ngIf="getFormControl('description').dirty && getFormControl('description').hasError('required')">请输入描述信息</div>
            </div>
          </div>
        </div>
      </div>
      <div nz-row [nzGutter]="0" class="row">
        <div nz-col [nzSpan]="24">
          <div nz-form-item nz-row class="row">
            <div nz-form-label nz-col [nzSpan]="4">
              <label [attr.for]="'tags'">标签</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="20">
              <ng-container *ngFor="let tag of tempTags">
                <nz-tag [nzClosable]="true" (nzClose)="deleteTag(tag)">{{tag}}</nz-tag>
              </ng-container>
              <button nz-button [nzSize]="'small'" *ngIf="!isAddingTag" (click)="addTag()">
                <i class="fa fa-plus"></i>
                <span>添加</span>
              </button>
              <input nz-input #input *ngIf="isAddingTag" type="text" [(ngModel)]="newTagValue" [ngModelOptions]="{standalone: true}" style="width: 100px;"
                (blur)="confirmAddTag()" (keydown.enter)="confirmAddTag()">
              <!-- <nz-input id="inputTagText" *ngIf="isAddingTag" style="width: 100px;" [(ngModel)]="newTagValue" [ngModelOptions]="{standalone: true}"
                (keyup.enter)="enterTagText()">
              </nz-input> -->
            </div>
          </div>
        </div>
      </div>
      <div nz-row [nzGutter]="0" class="row">
        <div nz-col [nzSpan]="24">
          <div nz-form-item nz-row class="row">
            <div nz-form-label nz-col [nzSpan]="4">
              <label [attr.for]="'datasource'" nz-form-item-required>读数据源</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="20">
              <nz-select [formControlName]="'datasource'" [nzPlaceHolder]="'请选择'">
                <nz-option *ngFor="let option of dataSourceList" [nzLabel]="option.name" [nzValue]="option">
                </nz-option>
              </nz-select>
            </div>
          </div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-control nz-col [nzSpan]="24" style="text-align: center;">
          <button nz-button [nzType]="'primary'" [disabled]="!validateForm.valid">
            <span>确定</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>