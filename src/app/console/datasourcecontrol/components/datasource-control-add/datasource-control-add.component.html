<div *ngIf="!isFinished">
  <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
    <div nz-row [nzGutter]="0" class="row">
      <div nz-col [nzSpan]="24">
        <div nz-form-item nz-row class="row">
          <div nz-form-label nz-col [nzSpan]="3">
            <label [attr.for]="'name'" nz-form-item-required>名称</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="8">
            <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'name'" [nzId]="'name'"></nz-input>
            <div nz-form-explain *ngIf="getFormControl('name').dirty && getFormControl('name').hasError('required')">请输入名称</div>
          </div>
        </div>
      </div>
    </div>
    <div nz-row [nzGutter]="0" class="row">
      <div nz-col [nzSpan]="24">
        <div nz-form-item nz-row class="row">
          <div nz-form-label nz-col [nzSpan]="3">
            <label [attr.for]="'url'" nz-form-item-required>URL</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="8">
            <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'url'" [nzId]="'url'"></nz-input>
            <div nz-form-explain *ngIf="getFormControl('url').dirty && getFormControl('url').hasError('required')">支持表达式方式，例如： http://[11-12]:[221-223].11.11/[A-Z][bc]</div>
          </div>
          <div nz-form-control nz-col [nzSpan]="4">
            <div class="btn default" style="margin-left: 10px;" (click)="batchDeleteObjects()">测试连接</div>
          </div>
        </div>
      </div>
    </div>
    <div nz-row [nzGutter]="0" class="row">
      <div nz-col [nzSpan]="24">
        <div nz-form-item nz-row class="row">
          <div nz-form-label nz-col [nzSpan]="3">
            <label [attr.for]="'permission'" nz-form-item-required>读/写</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="8">
            <!-- <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'url'" [nzId]="'url'"></nz-input>
                <div nz-form-explain *ngIf="getFormControl('url').dirty && getFormControl('url').hasError('required')">请输入名称</div> -->
            <span #permissionSpan>只读</span>
          </div>
        </div>
      </div>
    </div>
    <div nz-row [nzGutter]="0" class="row">
      <div nz-col [nzSpan]="24">
        <div nz-form-item nz-row class="row">
          <div nz-form-label nz-col [nzSpan]="3">
            <label [attr.for]="'type'" nz-form-item-required>类型</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="8">
            <nz-select [formControlName]="'type'" [nzPlaceHolder]="'请选择'">
              <nz-option *ngFor="let option of typeList" [nzLabel]="option" [nzValue]="option">
              </nz-option>
            </nz-select>
          </div>
        </div>
      </div>
    </div>
    <div nz-row [nzGutter]="0" class="row">
      <div nz-col [nzSpan]="24">
        <div nz-form-item nz-row class="row">
          <div nz-form-label nz-col [nzSpan]="3">
            <label [attr.for]="'basicAuthUser'">用户名</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="8">
            <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'basicAuthUser'" [nzId]="'basicAuthUser'"></nz-input>
            <div nz-form-explain *ngIf="getFormControl('basicAuthUser').dirty && getFormControl('basicAuthUser').hasError('required')">请输入名称</div>
          </div>
        </div>
      </div>
    </div>
    <div nz-row [nzGutter]="0" class="row">
      <div nz-col [nzSpan]="24">
        <div nz-form-item nz-row class="row">
          <div nz-form-label nz-col [nzSpan]="3">
            <label [attr.for]="'basicAuthPassword'">密码</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="8">
            <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'basicAuthPassword'" [nzId]="'basicAuthPassword'"></nz-input>
            <div nz-form-explain *ngIf="getFormControl('basicAuthPassword').dirty && getFormControl('basicAuthPassword').hasError('required')">请输入密码</div>
          </div>
        </div>
      </div>
    </div>
    <div nz-row [nzGutter]="0" class="row">
      <div nz-col [nzSpan]="24">
        <div nz-form-item nz-row class="row">
          <div nz-form-label nz-col [nzSpan]="3">
            <label [attr.for]="'description'">描述</label>
          </div>
          <div nz-form-control nz-col [nzSpan]="8">
            <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'description'" [nzId]="'description'" [nzType]="'textarea'" [nzRows]="'4'"></nz-input>
            <div nz-form-explain *ngIf="getFormControl('description').dirty && getFormControl('description').hasError('required')">不超过200个字符</div>
          </div>
        </div>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-control nz-col [nzSpan]="11" style="text-align: center;">
        <button nz-button [nzType]="'primary'" [disabled]="!validateForm.valid">
          <span>完成</span>
        </button>
        <button nz-button>
          <span>取消</span>
        </button>
      </div>
    </div>
  </form>
</div>

<div *ngIf="isFinished">
    <div class="form-w">
        <div class="dark-wrapper">
            <img src="assets/u4513.png"/>
            <div class="jump-info-w">
                <span class="count-w">添加数据源成功，页面即将跳转 <span>{{count}}</span> s.{{count % 2 === 0 ? '..' : ''}}</span>
                <a routerLink="../table">返回控制台</a>
            </div>
        </div>
    </div>
</div>