<div *ngIf="!isFinished">
  <form nz-form [formGroup]="validateForm">
    <div nz-form-item class='row'>
      <div nz-form-label class="column-left">
        <label [attr.for]="'name'" nz-form-item-required>名称</label>
      </div>
      <div nz-form-control class="column-right">
        <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'name'" [nzId]="'name'"></nz-input>
        <div nz-form-explain *ngIf="getFormControl('name').dirty && getFormControl('name').hasError('required')">请输入名称</div>
      </div>
    </div>
    <div nz-form-item class='row'>
      <div nz-form-label class="column-left">
        <label [attr.for]="'url'" nz-form-item-required>类型</label>
      </div>
      <div nz-form-control class="column-right">
        <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'type'" [nzId]="'type'"></nz-input>
        <div nz-form-explain *ngIf="getFormControl('type').dirty && getFormControl('type').hasError('required')">请输入类型</div>
      </div>
    </div>
    <div nz-form-item class='row'>
      <div nz-form-label class="column-left">
        <label [attr.for]="'url'" nz-form-item-required>URL</label>
      </div>
      <div nz-form-control class="column-right">
        <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'url'" [nzId]="'url'"></nz-input>
        <div nz-form-explain *ngIf="getFormControl('url').dirty && getFormControl('url').hasError('required')">支持表达式方式，例如： http://[11-12]:[221-223].11.11/[A-Z][bc]</div>
      </div>
      <!-- <div nz-form-control nz-col [nzSpan]="4">
            <div class="btn default" style="margin-left: 10px;" (click)="batchDeleteObjects()">测试连接</div>
          </div> -->
    </div>
    <div nz-form-item class='row'>
      <div nz-form-label class="column-left">
        <label [attr.for]="'access'" nz-form-item-required>访问</label>
      </div>
      <div nz-form-control class="column-right">
        <nz-select [formControlName]="'access'" [nzPlaceHolder]="'请选择'">
          <nz-option *ngFor="let option of accessList" [nzLabel]="option" [nzValue]="option">
          </nz-option>
        </nz-select>
        <div nz-form-explain *ngIf="getFormControl('access').dirty && getFormControl('access').hasError('required')">请输入访问</div>
      </div>
    </div>
    <div nz-form-item class='row'>
      <div nz-form-label class="column-left">
        <label [attr.for]="'authentication'" nz-form-item-required>Http认证</label>
      </div>
      <div nz-form-control class="column-right">
        <app-form-checkbox-input [formControlName]="'authentication'"></app-form-checkbox-input>
        <div nz-form-explain *ngIf="getFormControl('authentication').dirty && getFormControl('authentication').hasError('required')">请选择Http认证</div>
      </div>
    </div>

    <div *ngIf="showAuthDialog()" style="padding: 20px 0; background-color: #F8F9F9; width: 700px;">
      <div nz-form-item class='row'>
        <div nz-form-label class="column-left">
          <label [attr.for]="'basicAuthUser'" nz-form-item-required>基础认证设置</label>
        </div>
        <div nz-form-control class="column-right">
          <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'basicAuthUser'" [nzId]="'basicAuthUser'"></nz-input>
          <div nz-form-explain *ngIf="getFormControl('basicAuthUser').dirty && getFormControl('basicAuthUser').hasError('required')">请输入用户名</div>
        </div>
      </div>
      <div nz-form-item nz-row>
        <div nz-form-control class="column-right" style="margin-left: 204px;">
          <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'basicAuthPassword'" [nzId]="'basicAuthPassword'"></nz-input>
          <div nz-form-explain *ngIf="getFormControl('basicAuthPassword').dirty && getFormControl('basicAuthPassword').hasError('required')">请输入密码</div>
        </div>
      </div>
    </div>

    <div nz-form-item class='row'>
      <div nz-form-label class="column-left">
        <label [attr.for]="'permission'" nz-form-item-required>读/写</label>
      </div>
      <div nz-form-control class="column-right">
        <span #permissionSpan>只读</span>
      </div>
    </div>
    <div nz-form-item class='row'>
      <div nz-form-label class="column-left">
        <label [attr.for]="'description'">描述</label>
      </div>
      <div nz-form-control class="column-right">
        <nz-input [nzPlaceHolder]="'请输入...'" [formControlName]="'description'" [nzId]="'description'" [nzType]="'textarea'" [nzRows]="'4'"></nz-input>
        <div nz-form-explain>不超过200个字符</div>
      </div>
    </div>
    <div class='row'>
      <div class="btn default" style="margin-left: 204px;" (click)="batchDeleteObjects()">测试连接</div>
    </div>
  </form>

  <hr style="color: #ccc; margin-top: 30px; margin-bottom: 15px;" />
  <div class='row' style="display: flex; justify-content: flex-end; width: 700px;">
    <button nz-button [nzType]="'primary'" style="margin-right: 20px;" (click)="submitForm()">
      <span>确定</span>
    </button>
    <button nz-button>
      <span>取消</span>
    </button>
  </div>
</div>

<div *ngIf="isFinished">
  <div class="form-w">
    <div class="dark-wrapper">
      <img src="assets/u4513.png" />
      <div class="jump-info-w">
        <span class="count-w">添加数据源成功，页面即将跳转
          <span>{{count}}</span> s.{{count % 2 === 0 ? '..' : ''}}</span>
        <a routerLink="../table">返回控制台</a>
      </div>
    </div>
  </div>
</div>